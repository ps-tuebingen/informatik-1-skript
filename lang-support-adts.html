<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>13&nbsp;Sprachunterstützung für Algebraische Datentypen</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="footnote.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Informatik 1, WS 2021/<span class="mywbr"> &nbsp;</span>22 Universit&#228;t T&#252;bingen</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Programmieren_mit_Ausdr_cken.html" class="tocviewlink" data-pltdoc="x">Programmieren mit Ausdr&#252;cken</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Programmierer_entwerfen_Sprachen_.html" class="tocviewlink" data-pltdoc="x">Programmierer entwerfen Sprachen!</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Systematischer_Programmentwurf.html" class="tocviewlink" data-pltdoc="x">Systematischer Programmentwurf</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Batchprogramme_und_interaktive_Programme.html" class="tocviewlink" data-pltdoc="x">Batchprogramme und interaktive Programme</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="summentypen.html" class="tocviewlink" data-pltdoc="x">Datendefinition durch Alternativen:<span class="mywbr"> &nbsp;</span> Summentypen</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="produkttypen.html" class="tocviewlink" data-pltdoc="x">Datendefinition durch Zerlegung:<span class="mywbr"> &nbsp;</span> Produkttypen</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="adts.html" class="tocviewlink" data-pltdoc="x">Datendefinition durch Alternativen und Zerlegung:<span class="mywbr"> &nbsp;</span> Algebraische Datentypen</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="bsl-semantics.html" class="tocviewlink" data-pltdoc="x">Bedeutung von BSL</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Daten_beliebiger_Gr__e.html" class="tocviewlink" data-pltdoc="x">Daten beliebiger Gr&#246;&#223;e</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="patternmatching.html" class="tocviewlink" data-pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Quote_und_Unquote.html" class="tocviewlink" data-pltdoc="x">Quote und Unquote</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="lang-support.html" class="tocviewlink" data-pltdoc="x">Sprachunterst&#252;tzung f&#252;r Datendefinitionen und Signaturen</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Sprachunterst&#252;tzung f&#252;r Algebraische Datentypen</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="DRY__Abstraktion__berall_.html" class="tocviewlink" data-pltdoc="x">DRY:<span class="mywbr"> &nbsp;</span> Abstraktion &#252;berall!</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Programmieren_mit_Higher-Order_Funktionen.html" class="tocviewlink" data-pltdoc="x">Programmieren mit Higher-<wbr></wbr>Order Funktionen</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Bedeutung_von_ISL_.html" class="tocviewlink" data-pltdoc="x">Bedeutung von ISL+</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Generative_Rekursion.html" class="tocviewlink" data-pltdoc="x">Generative Rekursion</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="Akkumulation_von_Wissen.html" class="tocviewlink" data-pltdoc="x">Akkumulation von Wissen</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>13&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Sprachunterst&#252;tzung f&#252;r Algebraische Datentypen</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">13.1&nbsp;</td><td><a href="#%28part._.A.D.Ts_mit_.Listen_und_.S-.Expressions%29" class="tocviewlink" data-pltdoc="x">ADTs mit Listen und S-<wbr></wbr>Expressions</a></td></tr><tr><td align="right">13.2&nbsp;</td><td><a href="#%28part._.A.D.Ts_mit_.Strukturdefinitionen%29" class="tocviewlink" data-pltdoc="x">ADTs mit Strukturdefinitionen</a></td></tr><tr><td align="right">13.3&nbsp;</td><td><a href="#%28part._.A.D.Ts_mit_define-type%29" class="tocviewlink" data-pltdoc="x">ADTs mit <span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>type</span></span></a></td></tr><tr><td align="right">13.4&nbsp;</td><td><a href="#%28part._.Ausblick__.A.D.Ts_mit_.Zahlen%29" class="tocviewlink" data-pltdoc="x">Ausblick:<span class="mywbr"> &nbsp;</span> ADTs mit Zahlen</a></td></tr><tr><td align="right">13.5&nbsp;</td><td><a href="#%28part._diskadts%29" class="tocviewlink" data-pltdoc="x">Diskussion</a></td></tr><tr><td align="right">13.6&nbsp;</td><td><a href="#%28part._.Ausblick__.A.D.Ts_mit_.Dictionaries%29" class="tocviewlink" data-pltdoc="x">Ausblick:<span class="mywbr"> &nbsp;</span> ADTs mit Dictionaries</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">13.1<tt>&nbsp;</tt></span><a href="#%28part._.A.D.Ts_mit_.Listen_und_.S-.Expressions%29" class="tocsubseclink" data-pltdoc="x">ADTs mit Listen und S-<wbr></wbr>Expressions</a></td></tr><tr><td><span class="tocsublinknumber">13.2<tt>&nbsp;</tt></span><a href="#%28part._.A.D.Ts_mit_.Strukturdefinitionen%29" class="tocsubseclink" data-pltdoc="x">ADTs mit Strukturdefinitionen</a></td></tr><tr><td><span class="tocsublinknumber">13.3<tt>&nbsp;</tt></span><a href="#%28part._.A.D.Ts_mit_define-type%29" class="tocsubseclink" data-pltdoc="x">ADTs mit <span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>type</span></span></a></td></tr><tr><td><span class="tocsublinknumber">13.4<tt>&nbsp;</tt></span><a href="#%28part._.Ausblick__.A.D.Ts_mit_.Zahlen%29" class="tocsubseclink" data-pltdoc="x">Ausblick:<span class="mywbr"> &nbsp;</span> ADTs mit Zahlen</a></td></tr><tr><td><span class="tocsublinknumber">13.5<tt>&nbsp;</tt></span><a href="#%28part._diskadts%29" class="tocsubseclink" data-pltdoc="x">Diskussion</a></td></tr><tr><td><span class="tocsublinknumber">13.6<tt>&nbsp;</tt></span><a href="#%28part._.Ausblick__.A.D.Ts_mit_.Dictionaries%29" class="tocsubseclink" data-pltdoc="x">Ausblick:<span class="mywbr"> &nbsp;</span> ADTs mit Dictionaries</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="lang-support.html" title="backward to &quot;12 Sprachunterstützung für Datendefinitionen und Signaturen&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Informatik 1, WS 2021/22 Universität Tübingen&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="DRY__Abstraktion__berall_.html" title="forward to &quot;14 DRY: Abstraktion überall!&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>13<tt>&nbsp;</tt><a name="(part._lang-support-adts)"></a>Sprachunterst&#252;tzung f&#252;r Algebraische Datentypen</h3><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script><p>Wie wir in <a href="adts.html" data-pltdoc="x">Datendefinition durch Alternativen und Zerlegung: Algebraische Datentypen</a> und <a href="Daten_beliebiger_Gr__e.html#%28part._rekursivedatentypen%29" data-pltdoc="x">Rekursive Datentypen</a> gesehen haben, sind algebraische Datentypen
essentiell zur Strukturierung von komplexen Daten. &#196;hnlich dazu wie Signaturen und Datendefinitionen
unterschiedlich gut durch Sprachmittel unterst&#252;tzt werden k&#246;nnen (<a href="lang-support.html" data-pltdoc="x">Sprachunterst&#252;tzung f&#252;r Datendefinitionen und Signaturen</a>), gibt es
auch bei algebraischen Datentypen Unterschiede darin, wie gut diese von der Programmiersprache
unterst&#252;tzt werden.</p><p>Wir werden uns vier verschiedene Arten anschauen, wie man algebraische Datentypen ausdr&#252;cken kann
und diese im Anschluss bewerten.</p><p>Zu diesem Zweck betrachten wir folgende Datendefinitionen f&#252;r arithmetische Ausdr&#252;cke:</p><p><div class="SIntrapara">Beispiel:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An Expression is one of:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (make-literal Number)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- (make-addition Expression Expression)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. abstract syntax of arithmetic expressions</span></td></tr></table></blockquote></div></p><p>Als "Interface" f&#252;r den Datentyp wollen wir die folgende Menge
von Konstruktoren, Destruktoren und Pr&#228;dikaten betrachten:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Number -&gt; Expression</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">constructs a literal exression</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktSym">value</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Expression -&gt; Number</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">returns the number of a literal</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">throws an error if lit is not a literal</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktSym">lit</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[X] X -&gt; Bool</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">returns #true iff x is a literal</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Expression Expression -&gt; Expression</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">constructs an addition expression</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktSym">lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">rhs</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[X] X -&gt; Bool</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">returns #true iff x is an addition expression</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Expression -&gt; Expression</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">returns left hand side of an addition expression</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">throws an error if e is not an addition expression</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Expression -&gt; Expression</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">returns right hand side of an addition expression</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">throws an error if e is not an addition expression</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote><p>Wir werden nun unterschiedliche Arten betrachten, wie wir diesen Datentyp repr&#228;sentieren k&#246;nnen.</p><h4>13.1<tt>&nbsp;</tt><a name="(part._.A.D.Ts_mit_.Listen_und_.S-.Expressions)"></a>ADTs mit Listen und S-Expressions</h4><p>Wie in <a href="Quote_und_Unquote.html#%28part._sexps%29" data-pltdoc="x">S-Expressions</a> diskutiert, k&#246;nnen verschachtelte Listen mit Zahlen, Strings etc. &ndash; also S-Expressions &ndash;
als universelle Datenstruktur verwendet werden. Hier ist eine Realisierung der Funktionen von
oben auf Basis von S-Expressions:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">literal</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal?</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29" class="RktValLink" data-pltdoc="x">second</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29" class="RktValLink" data-pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">not-a-literal</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal?</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29" class="RktValLink" data-pltdoc="x">cons?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._symbol~3d~3f%29%29" class="RktValLink" data-pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">literal</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">addition</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29" class="RktValLink" data-pltdoc="x">cons?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._symbol~3d~3f%29%29" class="RktValLink" data-pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">addition</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29" class="RktValLink" data-pltdoc="x">second</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29" class="RktValLink" data-pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">not-an-addition</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29" class="RktValLink" data-pltdoc="x">third</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29" class="RktValLink" data-pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">not-an-addition</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">Auf Basis dieses Interfaces k&#246;nnen nun Funktionen definiert werden, wie zum Beispiel ein Interpreter f&#252;r
die Ausdr&#252;cke:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">literal?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">make-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">(addition (addition (literal 0) (literal 1)) (literal 2))</span></p></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr></table></blockquote><p>Beachten Sie, dass der Code von <span class="RktSym">calc</span> in keiner Weise von der Repr&#228;sentation
der Ausdr&#252;cke abh&#228;ngt, sondern lediglich auf Basis des Interfaces definiert wurde.</p><h4>13.2<tt>&nbsp;</tt><a name="(part._.A.D.Ts_mit_.Strukturdefinitionen)"></a>ADTs mit Strukturdefinitionen</h4><p>In dieser Variante verwenden wir Strukturdefinitionen, um das obige Interface zu implementieren.
Wir haben die Namen so gew&#228;hlt, dass sie mit denen, die durch <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> gebunden werden,
&#252;bereinstimmen, deshalb k&#246;nnen wir in zwei Zeilen das gesamte Interface implementieren:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">literal</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">rhs</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">Auch in dieser Variante k&#246;nnen wir nun wieder Funktionen auf Basis des Interfaces implementieren.
Die <span class="RktSym">calc</span> Funktion aus dem vorherigen Abschnitt funktioniert unver&#228;ndert mit der
<span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> Repr&#228;sentation von algebraischen Datentypen:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">literal?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Allerdings haben wir durch <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> nun eine neue, komfortablere M&#246;glichkeit, um algebraische
Datentypen zu verarbeiten, n&#228;mlich Pattern Matching (<a href="patternmatching.html" data-pltdoc="x">Pattern Matching</a>):</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29" class="RktStxLink" data-pltdoc="x">match</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">addition</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">literal</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">make-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">#(struct:addition</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#(struct:addition #(struct:literal 0) #(struct:literal 1))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#(struct:literal 2))</span></p></td></tr></table></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr></table></blockquote><h4>13.3<tt>&nbsp;</tt><a name="(part._.A.D.Ts_mit_define-type)"></a>ADTs mit <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span></h4><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Wechseln Sie zum Nutzen von <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> auf die "Intermediate Student Language".</p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Eine neue M&#246;glichkeit, um algebraische Datentypen zu repr&#228;sentieren, bietet
das <span class="RktSym">2htdp/abstraction</span> Teachpack mit dem <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> Konstrukt.
Im Unterschied zu <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> bietet <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> direkte Unterst&#252;tzung
f&#252;r Summentypen, daher kann der Summentyp <span class="RktSym">Expression</span> mit seinen unterschiedlichen
Alternativen direkt definiert werden. Ein weiterer wichtiger Unterschied zu <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span>
ist, dass zu jedem Feld einer Alternative eine Pr&#228;dikatsfunktion angegeben wird, die definiert,
welche Werte f&#252;r dieses Feld zul&#228;ssig sind. Diese Pr&#228;dikatsfunktionen sind eine
Form von dynamisch &#252;berpr&#252;ften Contracts (siehe <a href="lang-support.html#%28part._contracts%29" data-pltdoc="x">Dynamisch &#252;berpr&#252;fte Signaturen und Contracts</a>).</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29" class="RktValLink" data-pltdoc="x">number?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Analog zu <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> (<a href="produkttypen.html#%28part._definestruct%29" data-pltdoc="x">Strukturdefinitionen</a>)
definiert <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> f&#252;r jede Alternative Konstruktor-, Selektor- und Pr&#228;dikatsfunktionen,
so dass wir Werte dieses Typs auf die gleiche Weise definieren k&#246;nnen:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">make-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">#(struct:addition</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#(struct:addition #(struct:literal 0) #(struct:literal 1))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#(struct:literal 2))</span></p></td></tr></table></td></tr></table></blockquote><p>Allerdings wird bei Aufruf der Konstruktoren &#252;berpr&#252;ft, ob die Felder die dazugeh&#246;rige Pr&#228;dikatsfunktion
erf&#252;llen. Der folgende Aufruf, der bei der <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> Variante ausgef&#252;hrt werden k&#246;nnte,
schl&#228;gt nun zur Laufzeit fehl:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktErr">make-addition: expects an undefined or a Expression, given 0</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">in: the 1st argument of</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">(-&gt;</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">(or/c undefined? Expression?)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">(or/c undefined? Expression?)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">addition?)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">contract from: make-addition</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">blaming: use</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">(assuming the contract is correct)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">at: eval:13:0</span></p></td></tr></table></td></tr></table></blockquote><p>Passend zu <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> gibt es auch eine Erweiterung von <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29" class="RktStxLink" data-pltdoc="x">match</a></span>, n&#228;mlich <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._type-case%29%29" class="RktStxLink" data-pltdoc="x">type-case</a></span>.
Mit Hilfe von <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._type-case%29%29" class="RktStxLink" data-pltdoc="x">type-case</a></span> kann die <span class="RktSym">calc</span> Funktion nun wie folgt definiert werden:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._type-case%29%29" class="RktStxLink" data-pltdoc="x">type-case</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">literal</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">value</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr></table></blockquote><p>Der wichtigste Unterschied zwischen <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29" class="RktStxLink" data-pltdoc="x">match</a></span> und <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._type-case%29%29" class="RktStxLink" data-pltdoc="x">type-case</a></span> ist, dass der Typ <span class="RktSym">Expression</span>,
auf dem wir eine Fallunterscheidung machen m&#246;chten, explizit mit angegeben wird. Dies erm&#246;glicht es
der DrRacket Umgebung, bereits <span class="emph">vor</span> der Programmausf&#252;hrung zu &#252;berpr&#252;fen, ob alle F&#228;lle abgedeckt wurden.
Beispielsweise wird die folgende Definition bereits vor der Ausf&#252;hrung mit einer entsprechenden Fehlermeldung
zur&#252;ckgewiesen.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc2</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._type-case%29%29" class="RktStxLink" data-pltdoc="x">type-case</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc2</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc2</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktErr">type-case: syntax error; probable cause: you did not include a case for the literal variant, or no else-branch was present</span></p></td></tr></table></blockquote><p>Der Preis f&#252;r diese Vollst&#228;ndigkeits&#252;berpr&#252;fung ist, dass <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._type-case%29%29" class="RktStxLink" data-pltdoc="x">type-case</a></span> nur ein sehr eingeschr&#228;nktes
Pattern Matching erlaubt. Beispielsweise ist es nicht erlaubt, Literale, verschachtelte Pattern, oder
nicht-lineares Pattern Matching zu verwenden. Im Allgemeinen haben die Klauseln von <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._type-case%29%29" class="RktStxLink" data-pltdoc="x">type-case</a></span>
stets die Form <span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">variant</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name-1</span><span class="stt"> </span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">name-n</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">body-expression</span><span class="RktPn">)</span><span class="RktPn">)</span>, wobei in <span class="RktSym">body-expression</span>
die Namen <span class="RktSym">name-1</span> bis <span class="RktSym">name-n</span> verwendet werden k&#246;nnen.</p><h4>13.4<tt>&nbsp;</tt><a name="(part._.Ausblick__.A.D.Ts_mit_.Zahlen)"></a>Ausblick: ADTs mit Zahlen</h4><p>Ist es auch m&#246;glich, algebraische Datentypen zu repr&#228;sentieren, wenn man weder Listen/S-expressions
noch <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> oder <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> zur Verf&#252;gung hat, sondern der einzige
eingebaute Datentyp (nat&#252;rliche) Zahlen sind? Diese Frage ist von gro&#223;er Bedeutung in der theoretischen
Informatik, denn dort m&#246;chte man h&#228;ufig m&#246;glichst minimale und einfache Rechenmodelle definieren,
die dennoch prinzipiell m&#228;chtig genug w&#228;ren, um beliebige Programme darin auszudr&#252;cken.
Es spielt hierbei in der Regel keine Rolle, ob diese Techniken praxistauglich oder effizient sind.
Wichtig ist nur, ob eine Kodierung prinzipiell m&#246;glich ist. Der Grund, wieso die Rechenmodelle
m&#246;glichst minimal sein sollen, ist der, dass dann leichter wichtige Eigenschaften dieser
Rechenmodelle analysiert und bewiesen werden k&#246;nnen.</p><p>Beispielsweise ist es in vielen Rechenmodellen wichtig, ob es eine Art universelles Programm
gibt, das die Repr&#228;sentation eines Programms als Eingabe bekommt und dann dieses Programm
quasi simuliert. In der BSL w&#228;re dies beispielsweise ein Programm, welches eine Repr&#228;sentation
eines BSL Programms als Eingabe bekommt und dann die Ausf&#252;hrung dieses Programms simuliert.
Ein solches Programm nennt man auch <span class="emph">Selbstinterpreter</span>. In der theoretischen Informatik
kommen solche Konstruktionen h&#228;ufig vor, beispielsweise bei der sogenannten Universellen
Turing-Maschine, im Normalformtheorem in der Theorie rekursiver Funktionen, beim sogenannten "Halteproblem",
und im Beweis der Unvollst&#228;ndigkeitstheoreme von G&#246;del. Als Anerkennung der Beitr&#228;ge von
Kurt G&#246;del werden solche Repr&#228;sentationstechniken in der Berechenbarkeitstheorie auch
"G&#246;delisierung" genannt. All diese Rechenmodelle haben gemein, dass Zahlen quasi der einzige
eingebaute Datentyp sind.</p><p>Bevor wir algebraische Datentypen durch Zahlen repr&#228;sentieren, &#252;berlegen wir uns erstmal einen
Spezialfall: Wie k&#246;nnen wir ein Paar von zwei Zahlen, beispielsweise 17 und 12, durch eine einzelne Zahl
repr&#228;sentieren? Eine Idee w&#228;re, die Zahlen in Dezimalrepr&#228;sentation hintereinander zu schreiben: 1712.
Aber woher wissen wir dann, dass 17 und 12 gemeint waren und nicht etwa 1 und 712 oder 171 und 2?
Eine L&#246;sung hierzu w&#228;re, als Trennzeichen bestimmte Zahlenfolgen zu w&#228;hlen, die in den Zahlen selbst
nicht vorkommen d&#252;rfen. Wir werden eine andere Technik w&#228;hlen, die von Kurt G&#246;del vorgeschlagen wurde
und die auf der Eindeutigkeit der Primfaktorzerlegung beruht.</p><p>Die Eindeutigkeit der Primfaktorzerlegung sagt aus, dass jede Zahl eindeutig in ihre Primfaktoren
zerlegt werden kann. Wenn die Primzahlen durch <span class="relax">\(p_1,p_2,\ldots\)</span> bezeichnet werden,
so bedeutet dies, dass es f&#252;r jede nat&#252;rliche Zahl <span class="relax">\(n\)</span> eine Zahl <span class="relax">\(k\)</span> sowie
Zahlen <span class="relax">\(n_1,\ldots,n_k\)</span> gibt, so dass
<span class="relax">\(n = p_1^{n_1} \cdot p_2^{n_2} \cdot \ldots  \cdot p_k^{n_k} \)</span>. Beispielsweise kann
die Zahl 18 zerlegt werden in <span class="relax">\(18 = 2^1 \cdot 3^2\)</span>.</p><p>Aufgrund der Eindeutigkeit der Primfaktoren k&#246;nnten wir beispielsweise Paare mit Hilfe der
ersten beidem Primzahlen, 2 und 3, repr&#228;sentieren. Beispielsweise k&#246;nnten die Zahlen 17 und 12
von oben durch die Zahl <span class="relax">\(2^{17} \cdot 3^{12} = 69657034752\)</span> repr&#228;sentiert werden. Um die beiden Zahlen
wieder zu extrahieren, berechnen wir, wie h&#228;ufig sich die Zahl ohne Rest durch 2 bzw. 3 teilen l&#228;sst.</p><p>Diese Idee k&#246;nnen wir durch folgendes Programm ausdr&#252;cken:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Nat Nat -&gt; Nat</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">computes how often n can be divided by m</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">how-often-dividable-by</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._modulo%29%29" class="RktValLink" data-pltdoc="x">modulo</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">how-often-dividable-by</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29" class="RktValLink" data-pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">how-often-dividable-by</span><span class="hspace">&nbsp;</span><span class="RktVal">69657034752</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">17</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">how-often-dividable-by</span><span class="hspace">&nbsp;</span><span class="RktVal">69657034752</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">12</span></p></td></tr></table></blockquote><p>Offensichtlich k&#246;nnen durch Nutzen von mehr Primzahlen mit der gleichen Technik
beliebig lange Listen von (nat&#252;rlichen) Zahlen durch eine einzelne Zahl repr&#228;sentiert werden.
Verschachtelte Listen, also quasi S-Expressions, k&#246;nnen durch Verschachtelung der gleichen
Kodierungstechnik repr&#228;sentiert werden. Wollen wir beispielsweise ein Paar von zwei Paaren
repr&#228;sentieren und <span class="relax">\(n_1\)</span> ist die Kodierung des ersten Paars und <span class="relax">\(n_2\)</span>
die Kodierung des zweiten Paars, so kann das Paar der beiden Paare durch <span class="relax">\(2^{n_1} \cdot 3^{n_2}\)</span>
repr&#228;sentiert werden.</p><p>Bleibt noch die Frage, wie wir Summentypen repr&#228;sentieren. Hierzu k&#246;nnen wir einfach f&#252;r jede Variante
 disjunkte Mengen von Primzahlen nehmen.</p><p>Auf Basis dieser Idee k&#246;nnen wir nun das Interface f&#252;r den Expression Datentyp implementieren:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prime-1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prime-2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prime-3</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktSym">value</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._expt%29%29" class="RktValLink" data-pltdoc="x">expt</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prime-1</span><span class="hspace">&nbsp;</span><span class="RktSym">value</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">how-often-dividable-by</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="hspace">&nbsp;</span><span class="RktSym">prime-1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktSym">e-1</span><span class="hspace">&nbsp;</span><span class="RktSym">e-2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._expt%29%29" class="RktValLink" data-pltdoc="x">expt</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prime-2</span><span class="hspace">&nbsp;</span><span class="RktSym">e-1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._expt%29%29" class="RktValLink" data-pltdoc="x">expt</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prime-3</span><span class="hspace">&nbsp;</span><span class="RktSym">e-2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">how-often-dividable-by</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">prime-2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">how-often-dividable-by</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">prime-3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._modulo%29%29" class="RktValLink" data-pltdoc="x">modulo</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">prime-2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._modulo%29%29" class="RktValLink" data-pltdoc="x">modulo</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym">prime-1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">Diese Kodierung ergibt sehr schnell sehr gro&#223;e Zahlen, daher ist sie nicht f&#252;r praktische
Zwecke brauchbar, aber sie funktioniert wie gew&#252;nscht:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-addition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-literal</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">e-1</span></td></tr><tr><td><p><span class="RktRes">380166742320848568199802495386788316875</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e-1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e-1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">1</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e-1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">2</span></p></td></tr></table></blockquote></div></p><p>Auch Funktionen wie die <span class="RktSym">calc</span> Funktionen funktionieren weiterhin auch auf Basis
dieser ADT Repr&#228;sentation:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">addition?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">addition-rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">literal?</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">literal-value</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">e-1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr></table></blockquote><h4>13.5<tt>&nbsp;</tt><a name="(part._diskadts)"></a>Diskussion</h4><p>Die unterschiedlichen M&#246;glichkeiten, algebraische Datentypen (ADTs) zu unterst&#252;tzen, unterscheiden sich
in wichtigen Eigenschaften. Im folgenden bezeichnen wir die Variante ADTs mit Listen und S-Expressions als a),
ADTs mit Strukturdefinitionen als b), ADTs mit <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> als c), und ADTs mit Zahlen als d).</p><ul><li><p>Boilerplate: Gibt es in der Art, wie ADTs kodiert werden, Verst&#246;&#223;e gegen das DRY-Prinzip?
Solchen Code nennt man <span style="font-style: italic">boilerplate code</span>. Bei a) und d) haben wir solchen boilerplate code,
denn die Konstruktoren, Destruktoren und Pr&#228;dikate m&#252;ssen manuell auf eine mechanische Art und Weise implementiert werden.</p></li><li><p>Unterscheidbarkeit der Alternativen: K&#246;nnen die Alternativen bei Summentypen stets unterschieden werden?
Bei b) und c) bekommen wir durch die Sprache eindeutige Pr&#228;dikate geliefert, mit denen wir die Alternativen
unterscheiden k&#246;nnen. Bei a) und d) muss der Programmierer diszipliniert genug arbeiten um diese Eigenschaft
sicherzustellen. </p></li><li><p>Erweiterbarkeit der Summen: K&#246;nnen Summen leicht um weitere Alternativen erweitert werden? Ein Beispiel w&#228;re,
dass der Typ f&#252;r arithmetische Ausdr&#252;cke von oben noch durch eine Alternative zur Multiplikation von zwei
arithmetischen Ausdr&#252;cken erweitert werden soll. Mit "erweitert" ist gemeint, dass hierzu keine Modifiktion von
bestehendem Code erforderlich ist. Bei den Varianten a), b) und d) k&#246;nnen wir leicht weitere Alternativen
zu der jeweiligen Repr&#228;sentation des ADTs hinzuf&#252;gen, beispielsweise in der Variante b) durch Definition einer
weiteren Struktur. Allerdings werden bestehende Programme, die solche ADTs als Eingabe bekommen, in der Regel
nicht korrekt auf diesen erweiterten ADTs arbeiten, denn sie ber&#252;cksichtigen den hinzugekommenen Fall nicht.
Es ist auch nicht ohne weiteres m&#246;glich, ohne Modifikation dieser Programme die Funktionalit&#228;t f&#252;r den
hinzugekommenen Fall hinzuzuf&#252;gen. <span class="NoteBox"><span class="NoteContent">Dieses und &#228;hnliche Erweiterungsprobleme werden
unter dem Namen "Expression Problem" in vielen wissenschaftlichen Artikeln diskutiert.</span></span>
 Die Variante c) hingegen ist eine "geschlossene" Kodierung eines ADTs:
Alle Alternativen werden an einer Stelle definiert, daher ist eine Erweiterung um weitere Alternativen
ohne Modifikation von Code nicht ohne weiteres m&#246;glich. </p></li><li><p>Erweiterbarkeit der Produkte: K&#246;nnen Produkte leicht um weitere Komponenten erweitert werden? Ein Beispiel w&#228;re,
dass die Alternative f&#252;r Literale noch um eine weitere Zahl erweitert werden soll, welche aussagt, dass die
Zahl nur eine Ann&#228;herung an die genaue Zahl ist und die zweite Zahl gibt an, wie pr&#228;zise die Ann&#228;herung ist.
In der Variante a) k&#246;nnen wir Produkte leicht dadurch erweitern, dass wir die Listen l&#228;nger machen. Auf eine
&#228;hnliche Weise k&#246;nnen wir auch in der Variante d) die Produkte erweitern. In den Varianten b) und c) hingegen
ist die Anzahl der Komponenten (die "Arit&#228;t") der Konstruktoren in den Struktur- bzw. Typdefinitionen festgelegt
und diese l&#228;&#223;t sich nicht ohne Modifikation des bestehenden Codes erweitern.</p></li><li><p>Typsicherheit: Ist sichergestellt, dass die Datendefinition vom Programm eingehalten wird? Bei den Varianten
a) und d) gibt es keinerlei Unterst&#252;tzung f&#252;r Typsicherheit; falls Daten konstruiert werden, die gegen die
Datendefinition verstossen, so wird dies weder vor der Programmausf&#252;hrung noch w&#228;hrend der Konstruktion sondern
erst m&#246;glicherweise im weiteren Verlauf der Programmausf&#252;hrung festgestellt. Bei b) wird zumindest sichergestellt,
dass den Konstruktoren die korrekte Anzahl von Parametern &#252;bergeben wird (Arit&#228;t). Diese Pr&#252;fung findet, je
nach Sprachvariante, schon vor der Programmausf&#252;hrung (BSL) bzw. w&#228;hrend der Ausf&#252;hrung des Konstruktors (ISL) statt.
Bei der Variante c) hingegen wird eine Variante von Contracts verwendet (siehe <a href="lang-support.html#%28part._contracts%29" data-pltdoc="x">Dynamisch &#252;berpr&#252;fte Signaturen und Contracts</a>), um
w&#228;hrend der Konstruktion der Daten zu &#252;berpr&#252;fen, ob die Komponenten zur Datendefinition passen.</p></li><li><p>Vollst&#228;ndigkeit von Fallunterscheidungen: Wird sichergestellt, dass Fallunterscheidungen bei
Summentypen alle M&#246;glichkeiten ber&#252;cksichtigen? Die einzige Variante, die die Vollst&#228;ndigkeit vor der Programmausf&#252;hrung
&#252;berpr&#252;fen kann, ist c). Dies ist ein wichtiger Vorteil, der daraus resultiert, dass ADTs in dieser
Variante "geschlossen" sind.</p></li><li><p>Zeit- und Platzeffizienz: Ist die Kodierung von ADTs effizient bez&#252;glich des Platzbedarfs zur Repr&#228;sentation
der Daten im Speicher sowie bez&#252;glich des Zeitbedarfs zur Konstruktion und Destruktion (Analyse) von ADTs?
Effizienz ist kein wichtiges Thema in dieser Lehrveranstaltung, aber die Variante d) f&#228;llt aus diesen
Grund f&#252;r praktische Anwendungen aus.</p></li><li><p>Datentyp-generische Programme: Ist es m&#246;glich, Programme zu schreiben, die mit jedem algebraischen Datentyp
funktionieren, wie beispielsweise eine Funktion, die zu einem Wert, der einen beliebigen algebraischen Datentyp hat,
die Tiefe des Baums berechnet? Bei universellen Datenformaten wie S-Expressions ist dies leicht, w&#228;hrend es nicht
offensichtlich ist, wie man dies bei mittels <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span> oder <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._define-type%29%29" class="RktStxLink" data-pltdoc="x">define-type</a></span> definierten ADTs
hinbekommen k&#246;nnte. Datentyp-generische Programmierung, insbesondere f&#252;r statisch getypte Sprachen, ist ein sehr
aktiver Zweig in der Programmiersprachenforschung.</p></li></ul><h4>13.6<tt>&nbsp;</tt><a name="(part._.Ausblick__.A.D.Ts_mit_.Dictionaries)"></a>Ausblick: ADTs mit Dictionaries</h4><p>Eine wichtige Datenstruktur, die es in fast allen Programmiersprachen gibt, sind <span class="emph">dictionaries</span>, manchmal
auch bezeichnet als <span class="emph">associative array</span>, <span class="emph">map</span>, oder <span class="emph">hash table</span>. Dictionaries repr&#228;sentieren
partielle Funktionen mit einer endlichen Definitionsmenge (den sog. <span class="emph">keys</span>); jedem key wird also maximal ein Wert
zugeordnet. Eine g&#228;ngige Notation f&#252;r Dictionaries ist JSON, die JavaScript Object Notation. Eine Person mit
Namen und Vornamen k&#246;nnte in JSON beispielsweise so aufgeschrieben werden:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">{ name: 'Ostermann', vorname: 'Klaus'}</span></p></td></tr></table></div><div class="SIntrapara">In diesem Fall sind <span class="stt">name</span> und <span class="stt">vorname</span> die Keys und <span class="stt"></span><span class="stt">&rsquo;</span><span class="stt">Ostermann</span><span class="stt">&rsquo;</span><span class="stt"></span> und <span class="stt"></span><span class="stt">&rsquo;</span><span class="stt">Klaus</span><span class="stt">&rsquo;</span><span class="stt"></span> die jeweils
zugeordneten Werte. Dictionaries sind wie Listen, bei denen die Elemente nicht durch ihre Position in der Liste
sondern durch einen Key adressiert werden. Da Dictionaries genau wie Listen verschachtelt werden k&#246;nnen, k&#246;nnen
Dictionaries &#228;hnlich wie S-Expressions als universelle Datenstruktur verwendet werden.</div></p><p>Beispielsweise k&#246;nnten die arithmetischen Ausdr&#252;cke von oben auch durch Dictionaries repr&#228;sentiert werden:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">{ kind: 'add', lhs: { kind: 'lit', val: 7}, rhs: { kind: 'lit', val: 12}};</span></p></td></tr></table></p><p>Dictionaries spielen in einer Reihe von Programmiersprachen eine zentrale Rolle und werden als universelle
Datenstruktur im Sinne von S-Expressions verwendet, beispielsweise in JavaScript, AWK, Lua, Python, Perl und Ruby.
Unter dem Schlagwort "NoSQL" gibt es auch eine Reihe von Datenbanktechnologien, in denen Dictionaries eine
zentrale Rolle spielen.</p><p>Ein Interpreter f&#252;r arithmetische Ausdr&#252;cke, die als Dictionaries repr&#228;sentiert werden, kann beispielsweise
in JavaScript wie folgt aussehen:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">var calc = function (e) {</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">switch (e.kind) {</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">case 'lit': return e.val;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">case 'add': return calc(e.lhs)+calc(e.rhs);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></p></td></tr><tr><td><p><span class="stt">}</span></p></td></tr><tr><td><p><span class="stt">calc({ kind: 'add', lhs: { kind: 'lit', val: 7}, rhs: { kind: 'lit', val: 12}});</span></p></td></tr></table></p><p>Bez&#252;glich der Diskussion in <a href="#%28part._diskadts%29" data-pltdoc="x">Diskussion</a> verhalten sich dictionary-repr&#228;sentierte ADTs &#228;hnlich wie
S-Expressions.
<span class="NoteBox"><span class="NoteContent">Einige Sprachen, wie beispielsweise Python, verwenden statt der Dot-Notation
die Notation <span class="stt">e[</span><span class="stt">&rsquo;</span><span class="stt">lhs</span><span class="stt">&rsquo;</span><span class="stt">]</span>.</span></span>
Ein wichtiger Vorteil gegen&#252;ber S-Expressions ist, dass der Zugriff auf die Komponenten
keinen "boilerplate" Code erfordert sondern mit Hilfe der "Dot-Notation" (wie <span class="stt">e.lhs</span>) effizient
ausgedr&#252;ckt werden kann.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="lang-support.html" title="backward to &quot;12 Sprachunterstützung für Datendefinitionen und Signaturen&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Informatik 1, WS 2021/22 Universität Tübingen&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="DRY__Abstraktion__berall_.html" title="forward to &quot;14 DRY: Abstraktion überall!&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>