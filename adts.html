<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>7&nbsp;Datendefinition durch Alternativen und Zerlegung: Algebraische Datentypen</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Informatik 1, WS 2021/<span class="mywbr"> &nbsp;</span>22 Universit&#228;t T&#252;bingen</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Programmieren_mit_Ausdr_cken.html" class="tocviewlink" data-pltdoc="x">Programmieren mit Ausdr&#252;cken</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Programmierer_entwerfen_Sprachen_.html" class="tocviewlink" data-pltdoc="x">Programmierer entwerfen Sprachen!</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Systematischer_Programmentwurf.html" class="tocviewlink" data-pltdoc="x">Systematischer Programmentwurf</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Batchprogramme_und_interaktive_Programme.html" class="tocviewlink" data-pltdoc="x">Batchprogramme und interaktive Programme</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="summentypen.html" class="tocviewlink" data-pltdoc="x">Datendefinition durch Alternativen:<span class="mywbr"> &nbsp;</span> Summentypen</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="produkttypen.html" class="tocviewlink" data-pltdoc="x">Datendefinition durch Zerlegung:<span class="mywbr"> &nbsp;</span> Produkttypen</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Datendefinition durch Alternativen und Zerlegung:<span class="mywbr"> &nbsp;</span> Algebraische Datentypen</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="bsl-semantics.html" class="tocviewlink" data-pltdoc="x">Bedeutung von BSL</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Daten_beliebiger_Gr__e.html" class="tocviewlink" data-pltdoc="x">Daten beliebiger Gr&#246;&#223;e</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="patternmatching.html" class="tocviewlink" data-pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Quote_und_Unquote.html" class="tocviewlink" data-pltdoc="x">Quote und Unquote</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="lang-support.html" class="tocviewlink" data-pltdoc="x">Sprachunterst&#252;tzung f&#252;r Datendefinitionen und Signaturen</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="lang-support-adts.html" class="tocviewlink" data-pltdoc="x">Sprachunterst&#252;tzung f&#252;r Algebraische Datentypen</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="DRY__Abstraktion__berall_.html" class="tocviewlink" data-pltdoc="x">DRY:<span class="mywbr"> &nbsp;</span> Abstraktion &#252;berall!</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Programmieren_mit_Higher-Order_Funktionen.html" class="tocviewlink" data-pltdoc="x">Programmieren mit Higher-<wbr></wbr>Order Funktionen</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Bedeutung_von_ISL_.html" class="tocviewlink" data-pltdoc="x">Bedeutung von ISL+</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Generative_Rekursion.html" class="tocviewlink" data-pltdoc="x">Generative Rekursion</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="Akkumulation_von_Wissen.html" class="tocviewlink" data-pltdoc="x">Akkumulation von Wissen</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>7&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Datendefinition durch Alternativen und Zerlegung:<span class="mywbr"> &nbsp;</span> Algebraische Datentypen</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">7.1&nbsp;</td><td><a href="#%28part._.Beispiel__.Kollisionen_zwischen_.Shapes%29" class="tocviewlink" data-pltdoc="x">Beispiel:<span class="mywbr"> &nbsp;</span> Kollisionen zwischen Shapes</a></td></tr><tr><td align="right">7.2&nbsp;</td><td><a href="#%28part._entwurfsrezept-adt%29" class="tocviewlink" data-pltdoc="x">Programmentwurf mit ADTs</a></td></tr><tr><td align="right">7.3&nbsp;</td><td><a href="#%28part._refactoring-adt%29" class="tocviewlink" data-pltdoc="x">Refactoring von algebraischen Datentypen</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">7.1<tt>&nbsp;</tt></span><a href="#%28part._.Beispiel__.Kollisionen_zwischen_.Shapes%29" class="tocsubseclink" data-pltdoc="x">Beispiel:<span class="mywbr"> &nbsp;</span> Kollisionen zwischen Shapes</a></td></tr><tr><td><span class="tocsublinknumber">7.2<tt>&nbsp;</tt></span><a href="#%28part._entwurfsrezept-adt%29" class="tocsubseclink" data-pltdoc="x">Programmentwurf mit ADTs</a></td></tr><tr><td><span class="tocsublinknumber">7.3<tt>&nbsp;</tt></span><a href="#%28part._refactoring-adt%29" class="tocsubseclink" data-pltdoc="x">Refactoring von algebraischen Datentypen</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="produkttypen.html" title="backward to &quot;6 Datendefinition durch Zerlegung: Produkttypen&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Informatik 1, WS 2021/22 Universität Tübingen&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="bsl-semantics.html" title="forward to &quot;8 Bedeutung von BSL&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>7<tt>&nbsp;</tt><a name="(part._adts)"></a>Datendefinition durch Alternativen und Zerlegung: Algebraische Datentypen</h3><p>In den letzten beiden Kapiteln haben wir zwei neue Arten von Datendefinitionen
kennengelernt: Summentypen (in Form von Aufz&#228;hlungen und Intervallen),
mit denen man zwischen verschiedenen
Alternativen ausw&#228;hlen kann. Produkttypen (in Form von Datendefinitionen f&#252;r Strukturen),
mit denen man Daten zerlegen kann.</p><p>In vielen F&#228;llen ist es sinnvoll, Summen und Produkte miteinander zu kombinieren, also zum
Beispiel Summentypen zu definieren, bei denen einige Alternativen einen Produkttyp haben; oder Produkttypen
bei denen einige Felder Summentypen haben.</p><p>Kombinationen von Summen- und Produkttypen nennen wir <span style="font-style: italic">algebraische Datentypen</span>, kurz <span style="font-style: italic">ADT</span>.</p><h4>7.1<tt>&nbsp;</tt><a name="(part._.Beispiel__.Kollisionen_zwischen_.Shapes)"></a>Beispiel: Kollisionen zwischen Shapes</h4><p><div class="SIntrapara">Nehmen Sie an, Sie m&#246;chten ein Computerspiel programmieren, in dem Spielfiguren in unterschiedlichen
geometrischen Formen vorkommen, zum Beispiel Kreise und Rechtecke. Diese k&#246;nnen wir beispielsweise
so modellieren: </div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Wir w&#228;hlen den Namen <span class="RktSym">gcircle</span> (f&#252;r <span style="font-style: italic">geometric</span> circle) um
keinen Namenskonflikt mit der <span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29" class="RktValLink" data-pltdoc="x">circle</a></span> Funktion aus dem image.ss Teachpack zu haben.</p></blockquote></blockquote></blockquote></div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">gcircle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">center</span><span class="hspace">&nbsp;</span><span class="RktSym">radius</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A GCircle is (make-gcircle Posn Number)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. the geometrical representation of a circle</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">grectangle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">corner-ul</span><span class="hspace">&nbsp;</span><span class="RktSym">corner-dr</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A GRrectangle is (make-grectangle Posn Posn)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. the geometrical representation of a rectangle</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where corner-ul is the upper left corner </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and corner-dr the down right corner</span></td></tr></table></blockquote><p>Das interessante an diesen beiden Definitionen ist, dass Kreise und Rechtecke viele
Gemeinsamkeiten haben. Beispielsweise k&#246;nnen beide verschoben, vergr&#246;&#223;ert oder gezeichnet werden.
Viele Algorithmen sind f&#252;r beliebige geometrische Formen sinnvoll und unterscheiden
sich nur in den Details. Nennen wir die Abstraktion, die beliebige geometrische Figuren
bezeichnet, beispielsweise <span class="RktSym">Shape</span>. Nehmen wir an, wir haben bereits
eine Funktion, die f&#252;r beliebige geometrische Formen bestimmen kann, ob sie &#252;berlappen:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Shape Shape -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines whether shape1 overlaps with shape2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote><p>Auf Basis dieser und &#228;hnlicher Funktionen k&#246;nnen wir weitere Funktionen programmieren, die
v&#246;llig unabh&#228;ngig vom konkreten Shape (ob Kreis oder Rechteck) sind, beispielsweise eine
Funktion, die f&#252;r drei Shapes testet ob sie paarweise &#252;berlappen:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Shape Shape Shape -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines whether the shapes overlap pairwise</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps/3</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="hspace">&nbsp;</span><span class="RktSym">shape3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="hspace">&nbsp;</span><span class="RktSym">shape3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Die Funktion <span class="RktSym">overlaps</span> muss zwar unterscheiden, was f&#252;r eine genaue Form ihre Parameter haben, aber
die Funktion <span class="RktSym">overlaps/3</span> nicht mehr. Dies ist eine sehr m&#228;chtige Form der Abstraktion und
Code-Wiederverwendung: Wir formulieren abstrakte Algorithmen auf Basis einer Menge einfacher Funktionen
wie <span class="RktSym">overlaps</span> und k&#246;nnen dann diese Algorithmen auf <span style="font-style: italic">alle</span> Arten von Shapes anwenden.</p><p>Die Funktion <span class="RktSym">overlaps/3</span> steht also wirklich f&#252;r eine ganze Familie von Algorithmen: Je nachdem, was f&#252;r
Shapes ich gerade als Argument verwende, machen die Hilfsfunktionen wie <span class="RktSym">overlaps</span> etwas anderes, aber
der abstrakte Algorithmus in <span class="RktSym">overlaps/3</span> ist immer gleich.</p><p>Schauen wir uns nun an, wie wir Datentypen wie <span class="RktSym">Shape</span> und Funktionen wie <span class="RktSym">overlaps</span> definieren k&#246;nnen.
Um die Menge der m&#246;glichen geometrischen Figuren zu beschreiben, verwenden wir einen Summentyp, dessen Alternativen
die Produkttypen von oben sind:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A Shape is either:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- a GCircle </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- a GRectangle</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. a geometrical shape representing a circle or a rectangle</span></td></tr></table></blockquote><p>Nicht alle Algorithmen sind wie <span class="RktSym">overlaps/3</span> &#8212;<wbr></wbr> sie sind unterschiedlich je nachdem welches Shape gerade vorliegt.
Wie bereits aus dem Entwurfsrezept f&#252;r Summentypen bekannt, strukturieren wir solche Funktionen, indem wir
eine Fallunterscheidung machen.</p><p>Beispiel:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Shape Posn -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Determines whether a point is inside a shape</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-inside</span><span class="hspace">&nbsp;</span><span class="RktSym">shape</span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">gcircle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-inside-circle</span><span class="hspace">&nbsp;</span><span class="RktSym">shape</span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">grectangle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-inside-rectangle</span><span class="hspace">&nbsp;</span><span class="RktSym">shape</span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>In dieser Funktion f&#228;llt auf, dass in den Zweigen des <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span> Ausdrucks Hilfsfunktionen aufgerufen werden, die wir noch implementieren
m&#252;ssen. Man k&#246;nnte stattdessen die Implementation dieser Funktionen auch direkt in den <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span> Ausdruck schreiben, aber wenn die
Alternativen eines Summentyps Produkte sind, so werden diese Ausdr&#252;cke h&#228;ufig so komplex, dass man sie besser in eigene Funktionen
auslagern sollte. Au&#223;erdem ergeben sich durch die Auslagerung in separate Funktionen h&#228;ufig Gelegenheiten zur Wiederverwendung dieser Funktionenen.</p><p>In unserem Beispiel sehen die Implementationen dieser Hilfsfunktionen wie folgt aus:</p><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Erg&#228;nzen Sie die Definitionen f&#252;r <span class="RktSym">vector-length</span> und <span class="RktSym">posn-</span>!</p></blockquote></blockquote></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">GCircle Posn -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Determines whether a point is inside a circle</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-inside-circle</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29" class="RktValLink" data-pltdoc="x">circle</a></span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vector-length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posn-</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle-center</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29" class="RktValLink" data-pltdoc="x">circle</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle-radius</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29" class="RktValLink" data-pltdoc="x">circle</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">GRectangle Posn -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Determines whether a point is inside a rectangle</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point-inside-rectangle</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29" class="RktValLink" data-pltdoc="x">rectangle</a></span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29" class="RktValLink" data-pltdoc="x">posn-x</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle-corner-ul</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29" class="RktValLink" data-pltdoc="x">rectangle</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29" class="RktValLink" data-pltdoc="x">posn-x</a></span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29" class="RktValLink" data-pltdoc="x">posn-x</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle-corner-dr</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29" class="RktValLink" data-pltdoc="x">rectangle</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29" class="RktValLink" data-pltdoc="x">posn-y</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle-corner-ul</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29" class="RktValLink" data-pltdoc="x">rectangle</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29" class="RktValLink" data-pltdoc="x">posn-y</a></span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29" class="RktValLink" data-pltdoc="x">posn-y</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle-corner-dr</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29" class="RktValLink" data-pltdoc="x">rectangle</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Bei manchen Funktionen haben gleich mehrere Parameter einen Summentypen. In diesem Fall kann man erst
f&#252;r den ersten Parameter die Fallunterscheidung machen, dann geschachtelt f&#252;r den zweiten Parameter usw.
H&#228;ufig kann man jedoch auch die Fallunterscheidungen zusammenfassen. Dies ist beispielsweise
bei dem oben angesprochenen <span class="RktSym">overlaps</span> der Fall:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Shape Shape -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines whether shape1 overlaps with shape2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps-circle-circle</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps-rectangle-rectangle</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps-rectangle-circle</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">grectangle?</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps-rectangle-circle</span><span class="hspace">&nbsp;</span><span class="RktSym">shape2</span><span class="hspace">&nbsp;</span><span class="RktSym">shape1</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Auch hier haben wir wieder die Implementierung der einzelnen F&#228;lle in Funktionen ausgelagert. Die Tatsache, dass wir
in den beiden letzten F&#228;llen die gleiche Funktion aufrufen, illustriert, dass diese Hilfsfunktionen die Wiederverwendung
von Code f&#246;rdern. Hier die Implementation der Hilfsfunktionen.</p><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Wenn Sie Spass an Geometrie haben, erg&#228;nzen Sie die
Implementation von <span class="RktSym">overlaps-rectangle-rectangle</span> und  <span class="RktSym">overlaps-rectangle-circle</span>. </p></blockquote></blockquote></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">GCircle GCircle -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines whether c1 overlaps with c2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps-circle-circle</span><span class="hspace">&nbsp;</span><span class="RktSym">c1</span><span class="hspace">&nbsp;</span><span class="RktSym">c2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Two circles overlap if and only if the distance of their </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> centers is smaller than the sum of their radii</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vector-length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posn-</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle-center</span><span class="hspace">&nbsp;</span><span class="RktSym">c1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle-center</span><span class="hspace">&nbsp;</span><span class="RktSym">c2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle-radius</span><span class="hspace">&nbsp;</span><span class="RktSym">c1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcircle-radius</span><span class="hspace">&nbsp;</span><span class="RktSym">c2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">GRectangle GRectangle -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines whether r1 overlaps with r2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps-rectangle-rectangle</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="hspace">&nbsp;</span><span class="RktSym">r2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">GRectangle GCircle -&gt; Boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines whether r overlaps with c</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">overlaps-rectangle-circle</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>7.2<tt>&nbsp;</tt><a name="(part._entwurfsrezept-adt)"></a>Programmentwurf mit ADTs</h4><p>Das Entwurfsrezept aus Abschnitt <a href="Systematischer_Programmentwurf.html#%28part._entwurfsrezept%29" data-pltdoc="x">Entwurfsrezept zur Funktionsdefinition</a> erg&#228;nzen wir wie folgt:</p><ol><li><p>Wenn Sie eine Funktion programmieren m&#246;chten, die Informationen
als Eingabe erh&#228;lt oder als Ausgabe produziert, die man am besten
durch ADTs repr&#228;sentiert, so sollten Sie vor dem Programmieren
dieser Funktion diesen ADT definieren (falls sie ihn nicht schon
im Kontext einer anderen Funktion definiert haben).</p><p>Ein ADT ist dann sinnvoll, wenn in ihrer Problemstellung
unterschiedliche Arten von Informationen unterschieden werden, die jeweils
als Produkttyp formuliert werden k&#246;nnen, die aber ein gemeinsames Konzept
repr&#228;sentieren.</p><p>Ein wichtiger Punkt ist, dass man Daten mit ADTs hierarchisch organisieren
kann. Die Feldtypen der Produkte, die man definiert, k&#246;nnen also selber wieder
einen ADT haben. Wenn also ein Produkttyp sehr viele Felder hat, oder ein
Summentyp sehr viele Alternativen, so deutet dies darauf hin, dass Sie
eine tiefere Hierarchie (durch Verschachtelung von ADTs) verwenden sollten.</p></li><li><p>Im zweiten Schritt, der Definition der Funktionssignatur und der Aufgabenbeschreibung,
&#228;ndert sich nichts &#8212;<wbr></wbr> allerdings k&#246;nnen und sollten Sie nun nat&#252;rlich die Namen
der definierten ADTs verwenden.</p></li><li><p>Bei der Definition der Testcases sollten Sie bei Summentypen mindestens
einen Test pro Alternative definieren. Beachten Sie, dass es durch die Schachtelung von
Summen- und Produkttypen jetzt m&#246;glicherweise viel mehr Alternativen gibt. Bei sehr gro&#223;en
Datentypen ist es unter Umst&#228;nden nicht mehr realistisch, jede Alternative zu testen, weil im
schlechtesten Fall die Menge der Alternativen exponentiell mit der Tiefe des Datentypen w&#228;chst.</p></li><li><p>Bei der Definition des Funktionstemplates gibt es nun zwei Dimensionen: Den Summentyp
und die Produkttypen in (einigen seiner) Alternativen.</p><p>Falls wir als &#228;u&#223;erstes einen Summentyp haben, so sollten wir zun&#228;chst in einem
<span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span> Ausdruck alle F&#228;lle unterscheiden.</p><p>F&#252;r alle Alternativen, die Produkttypen sind, sollte in der Regel eine Hilfsfunktion
definiert werden, die diesen Fall abdeckt. Diese Hilfsfunktion sollten sie in diesem Schritt auch nur
(durch erneute Anwendung dieses Entwurfsrezepts) bis zum Template-Schritt implementieren.</p><p>Nur wenn die Implementation
dieses Falls wahrscheinlich sehr einfach ist, sollten die Selektoren f&#252;r die Felder des Produkts
in das Template mit aufgenommen werden.</p><p>Allerdings gibt es einen wichtigen Fall, in dem sie <span style="font-style: italic">keinen</span> <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span> Ausdruck
zur Unterscheidung der Alternativen ins Template aufnehmen sollten, n&#228;mlich dann, wenn es m&#246;glich
ist, die Funktion abstrakt zu formulieren &#8212;<wbr></wbr> sie also die F&#228;lle nicht unterscheiden, sondern
lediglich bereits existierende Funktionen aufrufen, die auch auf Basis des ADTs implementiert
wurden. Als Beispiel haben wir die <span class="RktSym">overlap/3</span> Funktion gesehen.</p></li><li><p>In diesem Schritt sollten sie aus dem Template ein lauff&#228;higes Programm machen. Da sie im vorherigen
Schritt eventuell Templates f&#252;r Hilfsfunktionen definiert haben, m&#252;ssen sie auch diese Hilfsfunktionen
nun implementieren.</p></li><li><p>Testen sie. Falls Tests fehlschlagen, gehen sie zur&#252;ck zum vorherigen Schritt.</p></li><li><p>&#220;berpr&#252;fen Sie beim Refactoring zus&#228;tzlich die neu definierten ADTs. Auch hier kann es Verst&#246;&#223;e gegen
das DRY-Prinzip geben, z.B. wenn es gro&#223;e Gemeinsamkeiten zwischen ADTs gibt. Gibt es beispielsweise
in mehreren Datentypen zwei Felder zur Repr&#228;sentation von Koordinaten, so bietet es sich an, stattdessen
die <span class="RktSym"><span class="badlink"><span class="RktValLink">posn</span></span></span> Struktur zu verwenden. Vermeiden Sie sehr breite aber flache ADTs; die logische Gruppierung
der Daten durch eine Hierarchie von ADTs f&#246;rdert die Wiederverwendbarkeit und Lesbarkeit des Codes.</p></li></ol><h4>7.3<tt>&nbsp;</tt><a name="(part._refactoring-adt)"></a>Refactoring von algebraischen Datentypen</h4><p>Algebraische Datentypen sind Kombinationen von Produkttypen und Summentypen.
Wie bereits in Schritt 7 des Entwurfsrezepts oben angedeutet, kann es mehrere Arten geben
Daten zu modellieren. Manche L&#246;sungen f&#252;r eine Datenmodellierung zeigen dabei mehr
Wiederholungen, als andere und versto&#223;en damit gegen das DRY-Prinzip.</p><p>Wenn wir ein Programm umschreiben k&#246;nnen, dass es statt eines Datentyps <span style="font-style: italic">A</span> nun einen
Datentyp <span style="font-style: italic">B</span> verwendet, und es eine bijektive Abbildung zwischen den Daten, die von <span style="font-style: italic">A</span>
und <span style="font-style: italic">B</span> beschrieben werden gibt, sagen wir auch <span style="font-style: italic">A</span> und <span style="font-style: italic">B</span> sind <span style="font-style: italic">isomorph</span>.</p><p><div class="SIntrapara">Beispiel: Betrachten Sie die folgenden drei Definitionen f&#252;r einen Datentyp <span style="font-style: italic">Student</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">student1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lastname</span><span class="hspace">&nbsp;</span><span class="RktSym">firstname</span><span class="hspace">&nbsp;</span><span class="RktSym">matnr</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a Student1 is: (make-student1 String String Number)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. lastname, firstname, and matrikel number of a student</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">student2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">matnr</span><span class="hspace">&nbsp;</span><span class="RktSym">lastname</span><span class="hspace">&nbsp;</span><span class="RktSym">firstname</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a Student2 is: (make-student2 Number String String)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. matrikel number, lastname, and firstname of a student</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fullname</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">firstname</span><span class="hspace">&nbsp;</span><span class="RktSym">lastname</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a FullName is: (make-fullname String String)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. first name and last name of a person</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">student3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fullname</span><span class="hspace">&nbsp;</span><span class="RktSym">matnr</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a Student3 is: (make-student3 FullName Number)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. full name and matrikel number of a student</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Jede der drei Repr&#228;sentationen kann die gleichen Informationen darstellen. Programme, die einen dieser Typen verwenden, k&#246;nnen so refactored werden, dass sie einen der beiden anderen verwenden.
Was wir an <span style="font-style: italic">Student1</span> und <span style="font-style: italic">Student2</span> sehen, ist, dass Produkttypen, die sich nur in der Reihenfolge der Komponenten unterscheiden, isomorph sind: Wir k&#246;nnten zwischen den Datentypen
hin- und herkonvertieren,
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Student1 -&gt; Student2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student1-&gt;student2</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-student2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student1-matnr</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student1-lastname</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student1-firstname</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Student2 -&gt; Student1</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student2-&gt;student1</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-student1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student2-lastname</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student2-firstname</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">student2-matnr</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>und wir k&#246;nnen Programme, die <span style="font-style: italic">Student1</span> verwenden, so refactoren, dass sie stattdessen <span style="font-style: italic">Student2</span> verwenden, n&#228;mlich indem die entsprechenden Konstruktoren und Selektoren angepasst werden.</p><p>Das dritte Beispiel, <span style="font-style: italic">Student3</span>, zeigt, dass wir Daten gruppieren und in separate Datentypen auslagern k&#246;nnen. Auch hier gibt es eine Bijektion und ein offensichtliches Refactoring des Programms.</p><p>Wenn wir im allgemeinen Fall solche Typisomorphien betrachten, spielen offensichtlich die verwendeten Namen f&#252;r die Struktur und die Komponenten keine Rolle.
Wir k&#246;nnten f&#252;r diesen Zweck Produkttypen so schreiben:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">String</span><span class="hspace">&nbsp;</span><span class="RktSym">String</span><span class="hspace">&nbsp;</span><span class="RktSym">Number</span><span class="RktPn">)</span></p></blockquote><p>statt</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A Student1 is: (make-student1 String String Number)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. lastname, firstname, and matrikel number of a student</span></td></tr></table></blockquote><p>Analog dazu k&#246;nnen wir Summentypen mit der <span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span> Notation beschreiben. Statt</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A UniversityPerson is either:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- a Student</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- a Professor</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">- a ResearchAssociate</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interp. the kind of person you can meet at university.</span></td></tr></table></blockquote></div><div class="SIntrapara">schreiben wir <span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="stt"> </span><span class="RktSym">Student</span><span class="stt"> </span><span class="RktSym">Professor</span><span class="stt"> </span><span class="RktSym">ResearchAssociate</span><span class="RktPn">)</span>.</div></p><p><span style="font-style: italic">Achtung:</span> Wir verwenden diese Schreibweise lediglich, um &#252;ber Isomorphien und Refactorings
nachzudenken. In Ihrem Programmcode sollten Sie weiterhin bei der &#252;blichen Schreibweise
bleiben!</p><p>In dieser Notation k&#246;nnen wir die Typisomorphien auf algebraischen Datentypen wie folgt ausdr&#252;cken.
Wenn <span class="RktSym">X</span>, <span class="RktSym">Y</span> und <span class="RktSym">Z</span> beliebige Typen sind, dann gelten folgende Isomorphien:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Assoziativit&#228;t von *</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Kommutativit&#228;t von *</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Assoziativit&#228;t von +</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Kommutativit&#228;t von +</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Distributivit&#228;t von * und +</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">Z</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Es ist kein Zufall, dass wir mit Typen rechnen als w&#228;ren es Ausdr&#252;cke in der Algebra
(daher kommt &#252;brigens der Name "algebraische Datentypen"). Wenn man Summentypen als
sogenannte "tagged unions" definiert (also die Alternativen immer durch Tags unterschieden
werden k&#246;nnen), so geht diese Analogie sogar noch viel weiter. Wenn man beispielsweise
die Datentypen, die nur ein einiges Element haben, als <span class="RktVal">1</span> bezeichnet und
Datentypen mit zwei Elementen (wie Boolean) als <span class="RktVal">2</span>, gelten auch Isomorphien
wie</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span></p></blockquote><p>oder</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">X</span><span class="RktPn">)</span></p></blockquote><p>Die oben stehenden Isomorphien rechtfertigen eine gro&#223;e Klasse von Refactorings von
algebraischen Datentypen: Vertauschung von Reihenfolgen, "Inlining" bzw. "Outsourcing" von Datentypen,
"Ausmultiplikation" von Produkten.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="produkttypen.html" title="backward to &quot;6 Datendefinition durch Zerlegung: Produkttypen&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Informatik 1, WS 2021/22 Universität Tübingen&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="bsl-semantics.html" title="forward to &quot;8 Bedeutung von BSL&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>